{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./google-maps-angular.service\";\nconst _c0 = [\"map\"];\nexport let GoogleMapsAngularComponent = /*#__PURE__*/(() => {\n  class GoogleMapsAngularComponent {\n    constructor(mapsServiceObj) {\n      this.mapsServiceObj = mapsServiceObj;\n      this.latLong = {};\n      this.markerClicked = new EventEmitter();\n      this.markers = [];\n      this.radius = 2;\n      this.nMap = {};\n      this.customMarkers = [];\n      this.googleMapDefaultIcon = '';\n      this.googleMapActiveIcon = '';\n    }\n    ngOnInit() {\n      if (!document.getElementById('googlemaps')) {\n        const googleMapScript = document.createElement('SCRIPT');\n        const googleMapsKey = this.mapsServiceObj['googleMapsKey'];\n        googleMapScript.setAttribute('src', `https://maps.googleapis.com/maps/api/js?key=${googleMapsKey}&**callback=initMap`);\n        googleMapScript.setAttribute('id', 'googlemaps');\n        googleMapScript.setAttribute('defer', '');\n        googleMapScript.setAttribute('async', '');\n        document.head.appendChild(googleMapScript);\n      }\n      setTimeout(() => {\n        if (this.mapContainer && this.mapContainer.nativeElement) {\n          this.loadMap();\n        }\n      }, 2000);\n    }\n    /**\n     * load google maps\n     */\n    loadMap() {\n      const googleInit = this.getGoogleInitData(this.latLong.lat, this.latLong.long);\n      this.nMap = new google.maps.Map(this.mapContainer.nativeElement, googleInit);\n      this.renderMarkers();\n    }\n    /**\n     * init default data into google maps\n     * @param lattitude float\n     * @param longtitude float\n     */\n    getGoogleInitData(lattitude, longtitude) {\n      return {\n        zoom: 16,\n        center: new google.maps.LatLng(lattitude, longtitude),\n        styles: [{\n          featureType: 'administrative.country',\n          elementType: 'geometry',\n          stylers: [{\n            visibility: 'simplified'\n          }, {\n            hue: '#ff0000'\n          }]\n        }]\n      };\n    }\n    /**\n     *\n     * @param currIcon marker icon\n     * @param labelX label x position\n     * @returns\n     */\n    markerIconConfiguration(currIcon, labelX) {\n      return {\n        url: currIcon,\n        size: new google.maps.Size(45, 45),\n        origin: new google.maps.Point(0, 0),\n        anchor: new google.maps.Point(0, 20),\n        // scaledSize: new google.maps.Size(defaultSize, defaultSize),\n        labelOrigin: new google.maps.Point(labelX, 15.5)\n      };\n    }\n    /**\n     * get closest latitudes/longitudes\n     * @param event object\n     */\n    renderMarkers() {\n      if (this.markers && this.markers.length > 0) {\n        this.markers.forEach((currentMarker, i) => {\n          const currentLat = currentMarker.lat;\n          const currentLong = currentMarker.long;\n          const currentType = currentMarker.type;\n          const marker = new google.maps.Marker({\n            position: new google.maps.LatLng(currentLat, currentLong),\n            map: this.nMap,\n            icon: this.googleMapDefaultIcon ? this.markerIconConfiguration(this.googleMapDefaultIcon, 22) : '',\n            label: this.markers && this.markers[i] ? this.markers[i].labelDetails : {}\n          });\n          marker.setValues({\n            id: i,\n            type: currentType\n          });\n          ((markerObj, l) => {\n            google.maps.event.addListener(markerObj, 'click', () => {\n              this.markerClicked.emit({\n                rowClicked: l\n              });\n            });\n          })(marker, i);\n          this.customMarkers.push(marker);\n        });\n      }\n    }\n    static {\n      this.ɵfac = function GoogleMapsAngularComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || GoogleMapsAngularComponent)(i0.ɵɵdirectiveInject(i1.GoogleMapsAngularService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: GoogleMapsAngularComponent,\n        selectors: [[\"lib-google-maps-angular\"]],\n        viewQuery: function GoogleMapsAngularComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.mapContainer = _t.first);\n          }\n        },\n        inputs: {\n          latLong: \"latLong\",\n          markers: \"markers\",\n          googleMapDefaultIcon: \"googleMapDefaultIcon\",\n          googleMapActiveIcon: \"googleMapActiveIcon\"\n        },\n        outputs: {\n          markerClicked: \"markerClicked\"\n        },\n        decls: 2,\n        vars: 0,\n        consts: [[\"map\", \"\"], [1, \"google-maps\"]],\n        template: function GoogleMapsAngularComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"div\", 1, 0);\n          }\n        },\n        styles: [\".google-maps[_ngcontent-%COMP%]{position:inherit!important}\"]\n      });\n    }\n  }\n  return GoogleMapsAngularComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}