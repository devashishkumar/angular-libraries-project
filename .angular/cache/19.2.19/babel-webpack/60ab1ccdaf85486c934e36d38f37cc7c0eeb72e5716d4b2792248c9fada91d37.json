{"ast":null,"code":"import { Observable } from 'rxjs';\nimport { share } from 'rxjs/operators';\nimport * as io from 'socket.io-client';\nimport * as i0 from \"@angular/core\";\nexport let SocketIoNgxService = /*#__PURE__*/(() => {\n  class SocketIoNgxService {\n    constructor(config) {\n      this.config = config;\n      this.subscribersCounter = {};\n      this.eventObservables$ = {};\n      this.emptyConfig = {\n        url: '',\n        options: {}\n      };\n      if (config === undefined) {\n        config = this.emptyConfig;\n      }\n      const url = config.url;\n      const options = config.options;\n      const ioFunc = io.default ? io.default : io;\n      this.ioSocket = ioFunc(url, options);\n    }\n    of(namespace) {\n      this.ioSocket.of(namespace);\n    }\n    on(eventName, callback) {\n      this.ioSocket.on(eventName, callback);\n    }\n    once(eventName, callback) {\n      this.ioSocket.once(eventName, callback);\n    }\n    connect() {\n      return this.ioSocket.connect();\n    }\n    disconnect(_close) {\n      return this.ioSocket.disconnect.apply(this.ioSocket, arguments);\n    }\n    emit(_eventName, ..._args) {\n      return this.ioSocket.emit.apply(this.ioSocket, arguments);\n    }\n    removeListener(_eventName, _callback) {\n      return this.ioSocket.removeListener.apply(this.ioSocket, arguments);\n    }\n    removeAllListeners(_eventName) {\n      return this.ioSocket.removeAllListeners.apply(this.ioSocket, arguments);\n    }\n    fromEvent(eventName) {\n      if (!this.subscribersCounter[eventName]) {\n        this.subscribersCounter[eventName] = 0;\n      }\n      this.subscribersCounter[eventName]++;\n      if (!this.eventObservables$[eventName]) {\n        this.eventObservables$[eventName] = new Observable(observer => {\n          const listener = data => {\n            observer.next(data);\n          };\n          this.ioSocket.on(eventName, listener);\n          return () => {\n            this.subscribersCounter[eventName]--;\n            if (this.subscribersCounter[eventName] === 0) {\n              this.ioSocket.removeListener(eventName, listener);\n              delete this.eventObservables$[eventName];\n            }\n          };\n        }).pipe(share());\n      }\n      return this.eventObservables$[eventName];\n    }\n    fromOneTimeEvent(eventName) {\n      return new Promise(resolve => this.once(eventName, resolve));\n    }\n    static {\n      this.ɵfac = function SocketIoNgxService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SocketIoNgxService)(i0.ɵɵinject('config'));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: SocketIoNgxService,\n        factory: SocketIoNgxService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return SocketIoNgxService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}